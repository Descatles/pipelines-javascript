# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

# trigger:
# - master

# pool:
#   vmImage: 'ubuntu-latest'

# steps:
# - task: NodeTool@0
#   inputs:
#     versionSpec: '10.x'
#   displayName: 'Install Node.js'

# - script: |
#     npm install
#     npm run build
#   displayName: 'npm install and build'

trigger:
- master

variables:
  enabled_jobs: []

stages:
- stage: "Get_Repo_to_Trigger"
  jobs:
  - job: "Get_Repos"
    displayName: Get_Repos
    pool:
      vmImage: 'Ubuntu 18.04'
    steps:
    - script: 'node scripts/filterSDK.js'
    - script: echo $(enabled_jobs)

- stage: "Trigger_SDKAutomation"
  jobs:
  - job: "AzureSdkForNet"
    condition: containsValue(variables['enabled_jobs'], 'azure-sdk-for-net')
    displayName: AzureSdkForNet
    # env:
    #   SDK_REPO_NAME: "azure-sdk-for-net"
    steps:
    - script: echo "azure-sdk-for-net"
  - job: "AzureSdkForJava"
    condition: containsValue(variables['enabled_jobs'], 'azure-sdk-for-java')
    displayName: AzureSdkForJava
    # env:
    #   SDK_REPO_NAME: "azure-sdk-for-java"
    steps:
    - script: echo "azure-sdk-for-java"
  - job: "AzureSdkForJs"
    condition: containsValue(variables['enabled_jobs'], 'azure-sdk-for-js')
    displayName: AzureSdkForJs
    # env:
    #   SDK_REPO_NAME: "azure-sdk-for-js"
    steps:
    - script: echo "azure-sdk-for-js"
  - job: "AzureSdkForPython"
    condition: containsValue(variables['enabled_jobs'], 'azure-sdk-for-python')
    displayName: AzureSdkForPython
    # env:
    #   SDK_REPO_NAME: "azure-sdk-for-python"
    steps:
    - script: echo "azure-sdk-for-python"
